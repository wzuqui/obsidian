"use strict";(self.webpackChunkobsidian=self.webpackChunkobsidian||[]).push([[3673],{4137:(e,a,r)=>{r.d(a,{Zo:()=>p,kt:()=>g});var t=r(7294);function o(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function n(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,t)}return r}function i(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?n(Object(r),!0).forEach((function(a){o(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}function d(e,a){if(null==e)return{};var r,t,o=function(e,a){if(null==e)return{};var r,t,o={},n=Object.keys(e);for(t=0;t<n.length;t++)r=n[t],a.indexOf(r)>=0||(o[r]=e[r]);return o}(e,a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)r=n[t],a.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=t.createContext({}),c=function(e){var a=t.useContext(s),r=a;return e&&(r="function"==typeof e?e(a):i(i({},a),e)),r},p=function(e){var a=c(e.components);return t.createElement(s.Provider,{value:a},e.children)},l="mdxType",u={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},m=t.forwardRef((function(e,a){var r=e.components,o=e.mdxType,n=e.originalType,s=e.parentName,p=d(e,["components","mdxType","originalType","parentName"]),l=c(r),m=o,g=l["".concat(s,".").concat(m)]||l[m]||u[m]||n;return r?t.createElement(g,i(i({ref:a},p),{},{components:r})):t.createElement(g,i({ref:a},p))}));function g(e,a){var r=arguments,o=a&&a.mdxType;if("string"==typeof e||o){var n=r.length,i=new Array(n);i[0]=m;var d={};for(var s in a)hasOwnProperty.call(a,s)&&(d[s]=a[s]);d.originalType=e,d[l]="string"==typeof e?e:o,i[1]=d;for(var c=2;c<n;c++)i[c]=r[c];return t.createElement.apply(null,i)}return t.createElement.apply(null,r)}m.displayName="MDXCreateElement"},5663:(e,a,r)=>{r.r(a),r.d(a,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>n,metadata:()=>d,toc:()=>c});var t=r(7462),o=(r(7294),r(4137));const n={sidebar_position:5},i="\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66 Broadcast",d={unversionedId:"introducao-a-back-end/capitulo-1/ip/broadcast",id:"introducao-a-back-end/capitulo-1/ip/broadcast",title:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66 Broadcast",description:"\xc9 sempre o \xfaltimo endere\xe7o de uma rede. Exemplo: para uma rede 192.168.0.0/24 o IP de broadcast \xe9 192.168.0.255",source:"@site/docs/introducao-a-back-end/capitulo-1/ip/5-broadcast.md",sourceDirName:"introducao-a-back-end/capitulo-1/ip",slug:"/introducao-a-back-end/capitulo-1/ip/broadcast",permalink:"/docs/introducao-a-back-end/capitulo-1/ip/broadcast",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"\ud83d\uddfa\ufe0f Subnet",permalink:"/docs/introducao-a-back-end/capitulo-1/ip/subnet"},next:{title:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66 Multicast",permalink:"/docs/introducao-a-back-end/capitulo-1/ip/multicast"}},s={},c=[{value:"Consigo fazer bind em um IP de broadcast?",id:"consigo-fazer-bind-em-um-ip-de-broadcast",level:2},{value:"Vamos fazer um programa C# (\ud83d\udd28 m\xe3o no c\xf3digo)",id:"vamos-fazer-um-programa-c--m\xe3o-no-c\xf3digo",level:3},{value:"Alterando o programa para for\xe7ar o bind no IP de broadcast",id:"alterando-o-programa-para-for\xe7ar-o-bind-no-ip-de-broadcast",level:4},{value:"Refer\xeancias",id:"refer\xeancias",level:2}],p={toc:c},l="wrapper";function u(e){let{components:a,...n}=e;return(0,o.kt)(l,(0,t.Z)({},p,n,{components:a,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"-broadcast"},"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66 Broadcast"),(0,o.kt)("p",null,"\xc9 sempre o \xfaltimo endere\xe7o de uma rede. Exemplo: para uma rede 192.168.0.0/24 o IP de broadcast \xe9 192.168.0.255"),(0,o.kt)("p",null,"Representa\xe7\xe3o de um pacote broadcast"),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://i.stack.imgur.com/Jq190.gif",alt:null})),(0,o.kt)("h2",{id:"consigo-fazer-bind-em-um-ip-de-broadcast"},"Consigo fazer bind em um IP de broadcast?"),(0,o.kt)("p",null,"N\xe3o, n\xe3o \xe9 poss\xedvel fazer bind em um IP de broadcast. O bind \xe9 feito em um endere\xe7o IP espec\xedfico, e o IP de broadcast n\xe3o \xe9 um endere\xe7o IP espec\xedfico, mas sim um endere\xe7o de rede. Ent\xe3o o que voc\xea pode fazer \xe9 fazer bind em um endere\xe7o IP espec\xedfico e enviar pacotes para o IP de broadcast da rede."),(0,o.kt)("p",null,"No caso do C# voc\xea at\xe9 consegue fazer bind em um IP de broadcast, mas ele vai ignorar o IP de broadcast e vai receber pacotes de qualquer IP da rede."),(0,o.kt)("h3",{id:"vamos-fazer-um-programa-c--m\xe3o-no-c\xf3digo"},"Vamos fazer um programa C# (\ud83d\udd28 m\xe3o no c\xf3digo)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Program.cs"',title:'"Program.cs"'},'using System.Net;\nusing System.Net.Sockets;\nusing System.Text;\n\nvar xBuilder = Host.CreateDefaultBuilder(args)\n    .ConfigureServices(services =>\n    {\n        services.AddHostedService<UdpServer>();\n    })\n    .Build();\n\nxBuilder.Run();\n\nfile class UdpServer : BackgroundService\n{\n    private readonly ILogger<UdpServer> _logger;\n\n    public UdpServer(ILogger<UdpServer> logger)\n    {\n        _logger = logger;\n    }\n\n    protected override async Task ExecuteAsync(CancellationToken stoppingToken)\n    {\n        var xUdpClient = new UdpClient(12345);\n        var xRemoteIpEndPoint = new IPEndPoint(IPAddress.Broadcast, 0);\n\n        while (!stoppingToken.IsCancellationRequested)\n        {\n            _logger.LogInformation("Aguardando pacote...");\n            var xReceiveBytes = xUdpClient.Receive(ref xRemoteIpEndPoint);\n            var xReceiveString = Encoding.ASCII.GetString(xReceiveBytes);\n            _logger.LogInformation("ReceiveString: {String}", xReceiveString);\n        }\n\n        await Task.CompletedTask;\n    }\n}\n')),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Observe que a constante IPAddress.Broadcast \xe9 um IP de broadcast")),(0,o.kt)("p",null,"Agora vamos para o terminal e vamos pegar nosso IP com o comando ",(0,o.kt)("inlineCode",{parentName:"p"},"ipconfig"),"."),(0,o.kt)("p",null,"Depois vamos executar o programa com o comando ",(0,o.kt)("inlineCode",{parentName:"p"},"dotnet run")),(0,o.kt)("p",null,"Em um segundo terminal vamos digitar o comando ",(0,o.kt)("inlineCode",{parentName:"p"},"netstat -a -p upd")," para ver as conex\xf5es UDP ativas. E veja que estranho o IP de broadcast n\xe3o aparece na lista de conex\xf5es ativas. Mas sim o IP ",(0,o.kt)("inlineCode",{parentName:"p"},"0.0.0.0:12345"),", isso porque ele est\xe1 escutando qualquer IP da rede. O que aprendemos com isso \xe9 que n\xe3o \xe9 poss\xedvel fazer bind em um IP de broadcast que seria ",(0,o.kt)("inlineCode",{parentName:"p"},"192.168.1.255")),(0,o.kt)("p",null,"Ainda no mesmo computador vou abrir o programa ",(0,o.kt)("inlineCode",{parentName:"p"},"wireshark")," para ver os pacotes que est\xe3o sendo enviados e recebidos."),(0,o.kt)("p",null,"Em outro computador vou executar o programa ",(0,o.kt)("inlineCode",{parentName:"p"},"packagesender")," e vou enviar um pacote UDP para o o IP ",(0,o.kt)("inlineCode",{parentName:"p"},"192.168.1.255")," sobre a porta ",(0,o.kt)("inlineCode",{parentName:"p"},"UDP 12345"),"."),(0,o.kt)("p",null,"Agora veja o resultado:\n",(0,o.kt)("img",{alt:"Alt text",src:r(2057).Z,width:"1920",height:"724"})),(0,o.kt)("h4",{id:"alterando-o-programa-para-for\xe7ar-o-bind-no-ip-de-broadcast"},"Alterando o programa para for\xe7ar o bind no IP de broadcast"),(0,o.kt)("p",null,"Vamos alterar a linha do ",(0,o.kt)("inlineCode",{parentName:"p"},"IPEndPoint")," e tentar for\xe7ar o bind no IP de broadcast."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-csharp"},'var xRemoteIpEndPoint = new IPEndPoint(IPAddress.Parse("192.168.1.255"), 0);\n')),(0,o.kt)("p",null,"Executar o programa e olhe s\xf3 o que aconteceu:"),(0,o.kt)("p",null,"Continua recebendo pacotes"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Alt text",src:r(8027).Z,width:"1863",height:"694"})),(0,o.kt)("p",null,"Mas ainda est\xe1 ouvindo o IP ",(0,o.kt)("inlineCode",{parentName:"p"},"0.0.0.0:12345"),":"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Alt text",src:r(565).Z,width:"786",height:"620"})),(0,o.kt)("h2",{id:"refer\xeancias"},"Refer\xeancias"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://embarcados.com.br/udp-broadcast/"},"https://embarcados.com.br/udp-broadcast/")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://www.wireshark.org/"},"https://www.wireshark.org/")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://packetsender.com/"},"https://packetsender.com/"))))}u.isMDXComponent=!0},2057:(e,a,r)=>{r.d(a,{Z:()=>t});const t=r.p+"assets/images/image3-9ef0a2f1a07dd0e1219270d47034cf80.png"},8027:(e,a,r)=>{r.d(a,{Z:()=>t});const t=r.p+"assets/images/image4-1431a7e10213d0a5d415f6a5ee9b3f51.png"},565:(e,a,r)=>{r.d(a,{Z:()=>t});const t=r.p+"assets/images/image5-991dc6b5e9c9e08c5f2a82e28c625b92.png"}}]);